!function(e){"use strict";var t=window.setInterval,a=function(e,a){var n=this,r=Array.prototype.slice.call(arguments,2);return t(e instanceof Function?function(){e.apply(n,r)}:e,a)};e.fn.ftakar=function(t){var n=e.extend(e.fn.ftakar.defaults,t),r=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}};if(r()){var i=e(this),o={get:function(){var e=JSON.parse(localStorage.getItem(n.savedDataName));return"object"==typeof e&&null!==e?e:{}},set:function(e){localStorage.setItem(n.savedDataName,JSON.stringify(e))},destroy:function(){localStorage.removeItem(n.savedDataName)}},c={create:function(t){for(var a=0;a<n.idAttribs.length;a++)if(void 0!==e(t).attr(n.idAttribs[a]))return encodeURI(n.idAttribs[a])+" "+encodeURI(e(t).attr(n.idAttribs[a]));return!1},get:function(e){for(var t=e.split(" "),a=0;a<t.length;a++)t[a]=decodeURI(t[a]);return t}},s={save:function(t){if(t){var a=o.get(),r=c.create(t);if(r){n.beforeSave.call();var i=(new Date).getTime(),s=n.expireInMs?parseInt(i.toString())+n.expireInMs:null,l="";switch(e(t).attr("type")){case"radio":case"checkbox":l=e(t).prop("checked");break;default:l=e(t).val()}return a[r]={expires:s,val:l},o.set(a),n.onSave.call(),!0}}return!1},destroy:function(e){if(e){var t=o.get(),a=c.create(e);if(a)return n.beforeDelete.call(),delete t[a],n.onDelete.call(),o.set(t),!0}return!1},hasExpired:function(e){var t=(new Date).getTime();return e.expires?t>e.expires:!1}};n.clearOnSubmit&&this.closest("form").submit(function(e){e.preventDefault(),i.each(function(){s.destroy(this)})}),n.saveOnInterval&&!isNaN(n.saveOnInterval)&&parseInt(n.saveOnInterval)>0&&a(function(e){for(var t=0;t<e.length;t++)s.save(e[t])},parseInt(n.saveOnInterval),this),e(document).ready(function(){n.beforeLoad.call();var t=o.get();for(var a in t)if(s.hasExpired(t[a]))delete t[c];else{var r=c.get(a),i=e("["+r[0]+'="'+r[1]+'"]');switch(i.attr("type")){case"radio":case"checkbox":i.prop("checked",t[a].val);break;case"select":i.find("option").filter(function(){return e(this).text()===t[a].val}).attr("selected",!0);break;default:i.val(t[a].val)}}o.set(t),n.onLoad.call()}),n.saveOnChange&&this.change(function(){s.save(this)})}return this},e.fn.ftakar.defaults={savedDataName:"FTAKAR",saveOnInterval:!1,saveOnChange:!0,clearOnSubmit:!0,expireInMs:!1,idAttribs:["id","name","data-ftakar"],beforeSave:function(){},onSave:function(){},beforeLoad:function(){},onLoad:function(){},beforeDelete:function(){},onDelete:function(){},beforeClear:function(){},onClear:function(){}}}(jQuery);